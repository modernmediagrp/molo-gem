{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags core_tags comments staticfiles el_pagination_tags gem_tags %}

{% block content %}
<div class="section-page">
  
  {% load_child_sections_for_section self as sections %}
  {% if self.get_effective_image %}
    {% image self.get_effective_image fill-172x128 as section_photo %}
      <img alt="{{ self.title }}" src="{{ section_photo.url }}"/>
  {% endif %}
  <div class="heading {% if self.get_effective_extra_style_hints %}heading--section_page-self.get_effective_extra_style_hints{% else %} heading--backgound{% endif %}">
    <h1 class="heading__section">{{self.title}}</h1>
  </div>
  </div>

  <div id="article-hero">
    {% load_child_articles_for_section self as articles %}
    {% with articles|first as article %}
    {% if article %}
      {% include "core/article_intro_partial.html" with article=article %}
    {% endif %}
    {% endwith %}
  </div>

  <div class="article-list">
    {% load_child_articles_for_section self as articles %}
    {% for article in articles|slice:"1:" %}
        {% include "core/article_intro_partial.html" with article=article square_image=True %}
    {% endfor %}
  </div>
</div>

{% if articles %}
<div class="pagination">
  {% if articles_paginated.has_previous %}
    <a href="?p={{ articles_paginated.previous_page_number }}">&larr;</a>
  {% endif %}
  <span>
    Page {{ articles_paginated.number }} of {{ articles_paginated.paginator.num_pages }}
  </span>
  {% if articles_paginated.has_next %}
    <a href="?p={{ articles_paginated.next_page_number }}">&rarr;</a>
  {% endif %}
</div>
{% endif %}
{% endblock %}
