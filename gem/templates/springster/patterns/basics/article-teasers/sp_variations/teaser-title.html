{% load wagtailcore_tags core_tags gem_tags %}
{% if page.title_highlight %}
  <h3 class="{{layouttype}}-teaser__title {{layouttype}}-teaser__title--highlight block-with-text">
      <a href="{% pageurl article %}" class="{{layouttype}}-teaser__title-link">{{ article.title_highlight|safe|smarttruncatechars:45 }}</a>
  </h3>
{% else %}
  <h3 class="{{layouttype}}-teaser__title block-with-text">
      <a href="{% pageurl article %}" class="{{layouttype}}-teaser__title-link">{{ article.title|smarttruncatechars:45 }}</a>
  </h3>
{% endif %}

{% if article.subtitle_highlight or article.body_highlight %}
  <p class="carousel-teaser__subtitle highlight-description">
    {% if article.subtitle_highlight %}
      {{article.subtitle_highlight|safe|smarttruncatechars:28}}
    {% elif article.body_highlight %}
      {{article.body_highlight|safe|smarttruncatechars:28}}
    {% endif %}
  </p>
{% elif article.subtitle %}
  {% if article.title.30 %}
    <p class="{{layouttype}}-teaser__subtitle block-with-text">{{ article.subtitle|smarttruncatechars:28 }}</p>
  {% else %}
    <p class="{{layouttype}}-teaser__subtitle block-with-text">{{ article.subtitle|smarttruncatechars:50 }}</p>
  {% endif %}
{% endif %}
